from EA import *
import os


naoWalkOptimizer = EA_NaoWalkOptimizer()

# naoWalkOptimizer.initialize_population()

naoWalkOptimizer.add_custom_population([{'rlj1': [-12, -11], 'llj1': [-11, -12], 'rlj3': [40.4, 15], 'rlj4': [-55, -45], 'rlj5': [13, 30], 'llj3': [15, 40.4], 'llj4': [-45, -55], 'llj5': [30, 13], 'rlj6': [-4, 1], 'llj6': [-1, 4]}, {'rlj1': [-48.16801018285474, -13.601261085654244], 'llj1': [-11, -12], 'rlj3': [40.4, 15], 'rlj4': [-113.11189163308885, -72.24240525047281], 'rlj5': [71.30097382156487, 17.482788563972477], 'llj3': [15, 40.4], 'llj4': [-45, -55], 'llj5': [23.295178202408934, -37.23707868285771], 'rlj6': [-23.328632421676446, 19.82837263140449], 'llj6': [32.73084984006778, -1.0370908581263976]}, {'rlj1': [-70.96119377899723, -49.297979624211514], 'llj1': [-11, -12], 'rlj3': [30.05364468883593, -10.929904411830247], 'rlj4': [-68.51675516666194, -38.193561683242166], 'rlj5': [-32.17265258853395, 68.94383922503881], 'llj3': [34.61154452780004, -14.636653096401961], 'llj4': [-45, -55], 'llj5': [14.767320553239081, 72.98088403494552], 'rlj6': [14.573796564871486, -5.053871427191229], 'llj6': [-1, 4]}, {'rlj1': [-63.5952598235078, -12.835823134054394], 'llj1': [-11, -12], 'rlj3': [40.4, 15], 'rlj4': [-68.51675516666194, -38.193561683242166], 'rlj5': [-32.17265258853395, 68.94383922503881], 'llj3': [34.61154452780004, -14.636653096401961], 'llj4': [-45, -55], 'llj5': [30, 13], 'rlj6': [23.004587992120072, 6.598401286396204], 'llj6': [34.36325742332428, -20.06892386782728]}, {'rlj1': [-84.59807322482827, -7.659153262806257], 'llj1': [-32.711459978603465, -4.341100750298693], 'rlj3': [18.303081741052033, 58.04937471959293], 'rlj4': [-68.51675516666194, -38.193561683242166], 'rlj5': [-32.17265258853395, 68.94383922503881], 'llj3': [34.61154452780004, -14.636653096401961], 'llj4': [-45, -55], 'llj5': [14.767320553239081, 72.98088403494552], 'rlj6': [-19.818361748334112, 37.50234694169905], 'llj6': [27.904056195762934, -9.014289118500264]}, {'rlj1': [-12, -11], 'llj1': [-11, -12], 'rlj3': [40.4, 15], 'rlj4': [-113.11189163308885, -72.24240525047281], 'rlj5': [-25.02534652407519, 74.55823974258378], 'llj3': [15, 40.4], 'llj4': [-83.23122262612678, -78.54404615245878], 'llj5': [23.295178202408934, -37.23707868285771], 'rlj6': [39.93499718782978, 41.92354199966795], 'llj6': [32.73084984006778, -1.0370908581263976]}, {'rlj1': [-63.426632963156656, -55.88252836261916], 'llj1': [-11, -12], 'rlj3': [40.4, 15], 'rlj4': [-84.1992558051586, -104.35486320934068], 'rlj5': [12.925925157217243, -1.689867584939229], 'llj3': [9.990583354127608, 83.83841804538146], 'llj4': [-87.41686794169055, -88.89580973645289], 'llj5': [23.295178202408934, -37.23707868285771], 'rlj6': [-3.5586317573522592, 9.95174085757656], 'llj6': [9.41570893518552, 27.344109255204323]}, {'rlj1': [-25.95306061286847, -52.69225152591247], 'llj1': [-38.94452228399481, -64.95813698003974], 'rlj3': [40.4, 15], 'rlj4': [-84.1992558051586, -104.35486320934068], 'rlj5': [37.72708777272432, 2.337221447747048], 'llj3': [30.158261924254106, -0.6001237556610874], 'llj4': [-87.41686794169055, -88.89580973645289], 'llj5': [56.94296835024059, 11.800387510018297], 'rlj6': [-3.5586317573522592, 9.95174085757656], 'llj6': [-23.643401101615094, 11.78254998513711]}, {'rlj1': [-63.426632963156656, -55.88252836261916], 'llj1': [-11, -12], 'rlj3': [30.05364468883593, -10.929904411830247], 'rlj4': [-122.61701998282695, -6.2946148191906985], 'rlj5': [12.925925157217243, -1.689867584939229], 'llj3': [9.990583354127608, 83.83841804538146], 'llj4': [-100.64687572501268, -91.23901248674525], 'llj5': [-5.433397513858878, 30.122506545505374], 'rlj6': [14.573796564871486, -5.053871427191229], 'llj6': [27.452043812150528, 31.229211074024278]}, {'rlj1': [-7.864199115068118, -79.72071850729657], 'llj1': [-11, -12], 'rlj3': [4.628268283309929, 27.33267703239462], 'rlj4': [-84.1992558051586, -104.35486320934068], 'rlj5': [44.25809920200797, 64.2711625271617], 'llj3': [12.707374803342852, 32.09460873385594], 'llj4': [-87.41686794169055, -88.89580973645289], 'llj5': [61.2259401787404, -26.22145986564957], 'rlj6': [-3.5586317573522592, 9.95174085757656], 'llj6': [9.41570893518552, 27.344109255204323]}, {'rlj1': [-65.94323261332266, -77.72214582474058], 'llj1': [-11, -12], 'rlj3': [40.4, 15], 'rlj4': [-110.98128191704284, -86.43530779125746], 'rlj5': [-41.4485912671072, 29.550233650264033], 'llj3': [67.1945685341121, 73.82579434821399], 'llj4': [-111.85066859004162, -127.03176564608424], 'llj5': [23.295178202408934, -37.23707868285771], 'rlj6': [-20.821522315989547, -3.02724757908096], 'llj6': [32.73084984006778, -1.0370908581263976]}, {'rlj1': [-65.94323261332266, -77.72214582474058], 'llj1': [-11, -12], 'rlj3': [40.4, 15], 'rlj4': [-110.98128191704284, -86.43530779125746], 'rlj5': [-41.4485912671072, 29.550233650264033], 'llj3': [67.1945685341121, 73.82579434821399], 'llj4': [-111.85066859004162, -127.03176564608424], 'llj5': [23.295178202408934, -37.23707868285771], 'rlj6': [-20.821522315989547, -3.02724757908096], 'llj6': [32.73084984006778, -1.0370908581263976]}, {'rlj1': [-54.182441751369794, -46.252428906690156], 'llj1': [-57.79669707835323, -8.37862982005123], 'rlj3': [21.429385885669667, -14.017937430623412], 'rlj4': [-113.11189163308885, -72.24240525047281], 'rlj5': [6.07399347201202, -23.816615556712097], 'llj3': [15, 40.4], 'llj4': [-45, -55], 'llj5': [-2.0271002166978676, -28.13671527916309], 'rlj6': [-23.328632421676446, 19.82837263140449], 'llj6': [43.582360545831506, 24.920585077700537]}, {'rlj1': [-48.16801018285474, -13.601261085654244], 'llj1': [-24.488040593182532, -7.072637133402893], 'rlj3': [40.4, 15], 'rlj4': [-102.08413843616196, -52.18243098672366], 'rlj5': [-37.17837965263425, 70.86481504682169], 'llj3': [-14.05802781836076, 67.09257017290297], 'llj4': [-25.97190683407041, -114.26448917912779], 'llj5': [-44.595478980893574, 45.43497128705515], 'rlj6': [43.73577269132754, 28.390683579675894], 'llj6': [1.1805952815811445, 22.143719823093512]}, {'rlj1': [-25.95306061286847, -52.69225152591247], 'llj1': [-35.72897615358788, -65.53690790276256], 'rlj3': [12.033360046143976, 61.06768999535835], 'rlj4': [-84.1992558051586, -104.35486320934068], 'rlj5': [49.88177768290872, 50.39397152602916], 'llj3': [34.028478544537215, -4.204889170177477], 'llj4': [-87.41686794169055, -88.89580973645289], 'llj5': [23.295178202408934, -37.23707868285771], 'rlj6': [6.48013308095905, 36.18135687206626], 'llj6': [-19.956198779425087, -6.208275579131467]}, {'rlj1': [-12, -11], 'llj1': [-29.72497485688521, -39.8069047834731], 'rlj3': [40.4, 15], 'rlj4': [-55, -45], 'rlj5': [-14.235130355149487, 5.436801086543539], 'llj3': [15, 40.4], 'llj4': [-45, -55], 'llj5': [30, 13], 'rlj6': [-4, 1], 'llj6': [23.696195976438602, 31.05877398107777]}, {'rlj1': [-12.94614215957617, -58.760626306617354], 'llj1': [-57.79669707835323, -8.37862982005123], 'rlj3': [40.4, 15], 'rlj4': [-45.00760937919007, -27.654269467451172], 'rlj5': [6.07399347201202, -23.816615556712097], 'llj3': [15, 40.4], 'llj4': [-45, -55], 'llj5': [-2.0271002166978676, -28.13671527916309], 'rlj6': [-23.328632421676446, 19.82837263140449], 'llj6': [6.428167508824856, -8.017189653796848]}, {'rlj1': [-50.02908103305948, -79.13206616169697], 'llj1': [-57.79669707835323, -8.37862982005123], 'rlj3': [-2.8680130210054955, 20.620539934011646], 'rlj4': [-84.1992558051586, -104.35486320934068], 'rlj5': [12.925925157217243, -1.689867584939229], 'llj3': [9.990583354127608, 83.83841804538146], 'llj4': [-87.41686794169055, -88.89580973645289], 'llj5': [-13.389239042241691, 59.96292666011486], 'rlj6': [-3.5586317573522592, 9.95174085757656], 'llj6': [7.795625553848971, 13.19400522312774]}, {'rlj1': [-29.682133236849864, -54.573553600005425], 'llj1': [-51.19828385131782, -8.803195736202753], 'rlj3': [63.325776870563686, 34.34543060919163], 'rlj4': [-84.68236623396264, -97.08339632386128], 'rlj5': [-6.992992870242901, 36.37206638797795], 'llj3': [55.29267610939044, 8.93631777854607], 'llj4': [-9.424213454039545, -66.6662471449944], 'llj5': [30, 13], 'rlj6': [18.50106580230392, -24.799783464768954], 'llj6': [-1.0926492274701154, 20.011102942982966]}, {'rlj1': [-61.28233125029061, -52.15186236642664], 'llj1': [-51.19828385131782, -8.803195736202753], 'rlj3': [97.2011856881215, 72.53222708761162], 'rlj4': [-108.53114373030945, -52.44594951346237], 'rlj5': [29.65309010472545, -39.720015557255785], 'llj3': [30.158261924254106, -0.6001237556610874], 'llj4': [-44.97482322269079, -28.98504117732479], 'llj5': [73.59345271417368, -32.8993405500553], 'rlj6': [1.1813024626537185, -6.04354614566444], 'llj6': [-1.0926492274701154, 20.011102942982966]}])

# naoWalkOptimizer.add_custom_child({
#                             "rlj1":[-12,-11],
#                             "llj1":[-11,-12],
#                             "rlj3":[40.4,15],
#                             "rlj4":[-55,-45],
#                             "rlj5":[13,30],
#                             "rlj1":[-12,-11],
#                             "llj1":[-11,-12],
#                             "rlj3":[40.4,15],
#                             "rlj4":[-55,-45],
#                             "rlj5":[13,30],
#                             "llj3":[15,40.4],
#                             "llj4":[-45,-55],
#                             "llj5":[30,13],
#                             "rlj6":[-4,1],
#                             "llj6":[-1,4]})
#                             "llj3":[15,40.4],
#                             "llj4":[-45,-55],
#                             "llj5":[30,13],
#                             "rlj6":[-4,1],
#                             "llj6":[-1,4]})

file = open("best_scores_2.txt", "w")

for i in range(GENERATIONS):
    naoWalkOptimizer.update_fitness_scores()
    naoWalkOptimizer.generate_offspring(selection=Selection.Truncation)
    naoWalkOptimizer.update_fitness_scores(only_zero=True)
    naoWalkOptimizer.evaluate_population(selection=Selection.Truncation)
    best = naoWalkOptimizer.best_fitness_score()
    index = naoWalkOptimizer.fitness_scores.index(best)
    print("Generation:", naoWalkOptimizer.generation)
    print("Saving results...")
    file.write(str(i) + "," + str(best) + "," + str(naoWalkOptimizer.population[index]) + "\n")
    file.write("Population: " + str(naoWalkOptimizer.population) + "\n")
    print("Saved")

file.close() 
